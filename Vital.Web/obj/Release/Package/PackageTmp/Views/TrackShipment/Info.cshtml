@model List<Vital.Model.TrackingModel>

@{
    ViewBag.Title = "Track Shipment Information";
}

@if (Model != null)
{
    foreach (var item in Model)
    {
        <div class="panel" style="background: #ededed; border: #ededed; margin-top: 0px; padding-top: 5px;">
            <div class="row">
                <div class="twelve columns">
                    <h2 style="color: #f79020; margin-bottom: 25px;"></h2>
                </div>
            </div>
            <div class="row">
                <div class="twelve columns">
                    <dl class="tabs" style="border-bottom: solid 1px #ee8f1e; margin-bottom: 0px;">
                        <dd class="active"><a href="#simple1" style="cursor: default; color: #ffffff; background: #ee8f1e; border-left: 1px solid #ee8f1e; border-right: 1px solid #ee8f1e; font-weight: normal;">Tracking Detail</a></dd>
                    </dl>
                    <ul class="tabs-content">
                        <li class="active" id="simple1Tab">
                            <div class="panel" style="background: #fff; border: solid 1px #ee8f1e; margin: 0 0 22px 0; padding-top: 0px;">
                                <div class="row">
                                    <h4 style="margin-left: 15px;">@item.TrackingNumber</h4>

                                    <div class="nine columns">
                                        <div class="panel" style="background: #e7e7e7; border-bottom: none; border-top: 1px solid #d5d5d5; border-left: 1px solid #d5d5d5; border-right: 1px solid #d5d5d5; margin-top: 10px; margin-bottom: 0; padding-bottom: 8px; padding-top: 8px;">
                                            <div class="row">
                                                <div class="twelve columns">
                                                    <h4 style="margin-top: 0; margin-bottom: 0;"><strong>@item.Status</strong></h4>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="panel" style="background: #f5f5f5; border: 1px solid #d5d5d5; margin-top: 10px; margin-bottom: 0px; margin-top: 0px; padding-top: 20px; padding-bottom: 0px;">
                                            <!-- Filtering Delivery Status -->
                                            @if (@item.Status == "Delivered")
                                            {
                                                <div class="row">
                                                    <div class="six columns">
                                                        <strong>Delivered On:</strong>
                                                    </div>
                                                </div>
                                                <div class="row">
                                                    <div class="six columns">
                                                        @item.DeliveryDate
                                                    </div>
                                                </div>
                                                if (@item.SignedBy != "")
                                                {
                                                    <div class="row">
                                                        <div class="six columns">
                                                            <strong>Signed By:</strong>
                                                        </div>
                                                    </div>
                                                    <div class="row" style="margin-bottom: 20px;">
                                                        <div class="twelve columns">
                                                            @item.SignedBy
                                                        </div>
                                                    </div>
                                                }
                                                else
                                                {
                                                    <div class="row">
                                                        <div class="six columns">
                                                            <strong>Left At:</strong>
                                                        </div>
                                                    </div>
                                                    <div class="row" style="margin-bottom: 20px;">
                                                        <div class="twelve columns">
                                                            @item.LeftAt
                                                        </div>
                                                    </div>
                                                }

                                            }

                                            @if (@item.Status != "Delivered")
                                            {
                                                <div class="row">
                                                    <div class="six columns">
                                                        <strong>Last Location:</strong>
                                                    </div>
                                                </div>
                                                <div class="row" style="margin-bottom: 60px;">
                                                    <div class="twelve columns">
                                                        @item.ActivityLocation
                                                    </div>
                                                </div>
                                            }

                                        </div>
                                    </div>

                                    <div class="three columns">
                                        <div class="panel" style="background: #e7e7e7; border-bottom: none; border-top: 1px solid #d5d5d5; border-left: 1px solid #d5d5d5; border-right: 1px solid #d5d5d5; margin-top: 10px; margin-bottom: 0; padding-bottom: 8px; padding-top: 8px;">
                                            <div class="row">
                                                <div class="twelve columns">
                                                    <h6 style="margin-top: 0; margin-bottom: 0;">Shipping Information</h6>
                                                </div>
                                            </div>
                                        </div>

                                        <div class="panel" style="background: #f5f5f5; border: 1px solid #d5d5d5; margin-top: 10px; margin-bottom: 0px; margin-top: 0px; padding-top: 0px; padding-bottom: 0px;">
                                            <div class="row" style="margin-top: 5px; margin-bottom: 5px;">
                                                <div class="ten columns">
                                                    <strong>To: @item.DeliveredTo</strong>
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="three columns">
                                        <div class="panel" style="background: #e7e7e7; border-bottom: none; border-top: 1px solid #d5d5d5; border-left: 1px solid #d5d5d5; border-right: 1px solid #d5d5d5; margin-top: 10px; margin-bottom: 0; padding-bottom: 8px; padding-top: 8px;">
                                            <div class="row">
                                                <div class="twelve columns">
                                                    <h6 style="margin-top: 0; margin-bottom: 0;">Shipped By</h6>
                                                </div>
                                            </div>
                                        </div>

                                        <div class="panel" style="background: #f5f5f5; border: 1px solid #d5d5d5; margin-top: 10px; margin-bottom: 0px; margin-top: 0px; padding-top: 0px; padding-bottom: 0px;">
                                            <div class="row" style="margin-top: 5px; margin-bottom: 5px;">
                                                <div class="twelve columns">
                                                    <a href="#"><strong>@item.Description</strong></a>
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                </div>

                                <div class="row">
                                    <div class="nine columns">
                                        <div class="panel" style="background: #e7e7e7; border-bottom: none; border-top: 1px solid #d5d5d5; border-left: 1px solid #d5d5d5; border-right: 1px solid #d5d5d5; margin-top: 10px; margin-bottom: 0; padding-bottom: 8px; padding-top: 8px;">
                                            <div class="row">
                                                <div class="twelve columns">
                                                    <h6 style="margin-top: 0; margin-bottom: 0;"><strong>Additional Information</strong></h6>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="panel" style="background: #f5f5f5; border: 1px solid #d5d5d5; margin-top: 10px; margin-bottom: 0px; margin-top: 0px; padding-top: 20px; padding-bottom: 10px;">
                                            @if (@item.Status == "Delivered")
                                            {
                                                if (item.PackageCount > 0)
                                                {
                                                    <div class="row">
                                                        <div class="four columns">
                                                            <strong>Multiple Packages:</strong>
                                                        </div>
                                                        <div class="five columns">
                                                            @item.PackageCount
                                                        </div>
                                                    </div>
                                                }

                                            }

                                            @if (@item.Status != "Delivered")
                                            {
                                                if (@item.PackageCount > 1)
                                                {
                                                    <div class="row">
                                                        <div class="four columns">
                                                            <strong>Multiple Packages:</strong>
                                                        </div>
                                                        <div class="five columns">
                                                            @item.PackageCount
                                                        </div>
                                                    </div>
                                                }

                                            }

                                            <div class="row">
                                                <div class="four columns">
                                                    <strong>Shipped/Billed On:</strong>
                                                </div>
                                                <div class="five columns">
                                                    @item.BillingDate
                                                </div>
                                            </div>
                                            <div class="row">
                                                <div class="four columns">
                                                    <strong>Type:</strong>
                                                </div>
                                                <div class="five columns">
                                                    @item.PackageType
                                                </div>
                                            </div>
                                            @if (@item.PackageCount > 1)
                                            {
                                                <div class="row">
                                                    <div class="four columns">
                                                        <strong>Weight:</strong>
                                                    </div>
                                                    <div class="five columns">
                                                        @item.Weight
                                                    </div>
                                                </div>
                                            }
                                        </div>
                                    </div>
                                </div>

                                <div class="row">
                                    <div class="nine columns">
                                        <div class="panel" style="background: #e7e7e7; border-bottom: none; border-top: 1px solid #d5d5d5; border-left: 1px solid #d5d5d5; border-right: 1px solid #d5d5d5; margin-top: 10px; margin-bottom: 0; padding-bottom: 8px; padding-top: 8px;">
                                            <div class="row">
                                                <div class="twelve columns">
                                                    <h6 style="margin-top: 0; margin-bottom: 0;"><strong>Shipment Progress</strong></h6>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="panel" style="background: #f5f5f5; border: 1px solid #d5d5d5; margin-top: 10px; margin-bottom: 0px; margin-top: 0px; padding-top: 5px; padding-bottom: 5px;">
                                            <div class="row">
                                                <table style="margin:0 5px 0 0px; width: 100%;">
                                                    <tr>
                                                        <th style="width:130px;">Location</th>
                                                        <th style="width:100px;">Date</th>
                                                        <th style="width:100px;">Local Time</th>
                                                        <th style="width:180px;">Activity</th>
                                                    </tr>
                                                    @foreach (var progress in item.ShipmentProgress)
                                                    {
                                                        <tr style="background:#e7e7e7;">
                                                            <td>@progress.Location</td>
                                                            <td>@progress.Date</td>
                                                            <td>@progress.LocalTime</td>
                                                            <td>@progress.Activity</td>
                                                        </tr>
                                                    }
                                                </table>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                @if (@item.PackageCount > 1)
                                {
                                    <div class="row">
                                        <div class="nine columns">
                                            <div class="panel" style="background: #e7e7e7; border-bottom: none; border-top: 1px solid #d5d5d5; border-left: 1px solid #d5d5d5; border-right: 1px solid #d5d5d5; margin-top: 10px; margin-bottom: 0; padding-bottom: 8px; padding-top: 8px;">
                                                <div class="row">
                                                    <div class="twelve columns">
                                                        <h6 style="margin-top: 0; margin-bottom: 0;"><strong>Packages in this Shipment (Total Packages: @item.PackageCount)</strong></h6>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="panel" style="background: #f5f5f5; border: 1px solid #d5d5d5; margin-top: 0px; margin-bottom: 0px; margin-top: 0px; padding-top: 5px; padding-bottom: 5px;">
                                                <div class="row">
                                                    Select a tracking number to see the detail for another package.
                                                </div>
                                                <div class="row">
                                                    <table style="margin:0 5px 0 0px; width: 100%;">
                                                        <tr>
                                                            <th>Tracking Number</th>
                                                            <th>Reference</th>
                                                            <th>Status</th>
                                                            <th>Shipped</th>
                                                            <th>Scheduled</th>
                                                            <th>Weight</th>
                                                        </tr>
                                                        @foreach (var package in item.ShipmentPackage)
                                                        {
                                                            <tr style="background:#e7e7e7;">
                                                                <td><a href='~/TrackShipment/Info/@package.TrackingNumber'>@package.TrackingNumber</a></td>
                                                                <td>@package.Reference</td>
                                                                <td>@package.Status</td>
                                                                <td>@package.ShippedDate</td>
                                                                <td>@package.ScheduledDate</td>
                                                                <td>@package.Weight</td>
                                                            </tr>
                                                        }
                                                    </table>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                }
                            </div>
                        </li>
                    </ul>
                </div>
            </div>
        </div>
    }
}

